<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI X√≠ Ng·∫ßu Pro Max ‚Äì Cao Th·ªß Chuy√™n Nghi·ªáp</title>
<style>
  body { background:#000; color:#0f0; font-family: monospace; text-align:center; padding:20px; }
  input { width:80px; text-align:center; font-size:18px; margin:5px; }
  button { background:#0f0; color:#000; border:none; padding:8px 15px; cursor:pointer; font-weight:bold; border-radius:4px; }
  button:hover { background:#9f9; }
  #result { font-size:24px; margin-top:15px; }
  #confidence { font-size:18px; margin-top:8px; font-weight:bold; }
  #reason { font-size:14px; color:#0ff; margin-top:10px; }
  #tip { font-size:14px; color:#ffd; margin-top:10px; }
  #history { margin-top:15px; font-size:13px; color:#999; }

  /* ==== Giao di·ªán nh·∫≠p key ==== */
  #loginScreen {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: radial-gradient(circle at center, #001a00 0%, #000 100%);
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    color: #0f0; font-family: 'Courier New', monospace; z-index: 9999;
  }

  #loginBox {
    border: 2px solid #0f0;
    box-shadow: 0 0 20px #0f0;
    padding: 25px 30px;
    border-radius: 12px;
    width: 320px;
    background: rgba(0, 20, 0, 0.7);
    text-align: center;
    animation: glowIn 0.6s ease;
    position: relative;
  }

  @keyframes glowIn {
    from { opacity: 0; transform: scale(0.9); box-shadow: none; }
    to { opacity: 1; transform: scale(1); box-shadow: 0 0 20px #0f0; }
  }

  #keyInput {
    width: 90%; font-size: 16px; text-align: center;
    margin: 8px 0 16px; background: #000; color: #0f0;
    border: 1px solid #0f0; border-radius: 6px; padding: 6px;
    box-shadow: inset 0 0 10px #0f0;
  }

  .btn-row {
    display: flex;
    justify-content: space-between;
    gap: 10px;
    width: 90%;
    margin: 0 auto 10px;
  }

  .login-btn {
    flex: 1;
    padding: 10px;
    font-size: 14px;
    color: #0f0;
    background: transparent;
    border: 1px solid #0f0;
    border-radius: 8px;
    box-shadow: 0 0 10px #0f0;
    transition: 0.2s all ease;
  }
  .login-btn:hover {
    background: #0f0;
    color: #000;
    box-shadow: 0 0 20px #0f0, 0 0 30px #0f0;
    transform: translateY(-2px);
  }

  .btn-login-big {
    display: block;
    width: 90%;
    margin: 8px auto 0;
    padding: 12px;
    font-size: 16px;
    font-weight: bold;
    border: 1px solid #0f0;
    border-radius: 10px;
    box-shadow: 0 0 15px #0f0;
    background: transparent;
    color: #0f0;
    transition: 0.25s all ease;
  }
  .btn-login-big:hover {
    background: #0f0;
    color: #000;
    box-shadow: 0 0 25px #0f0, 0 0 35px #0f0;
  }

  #loginMsg { color:#f33; margin-top:12px; font-weight:bold; }

  .corner-btn {
    position: fixed;
    bottom: 20px;
    padding: 8px 14px;
    font-size: 13px;
    border: 1px solid #0f0;
    color: #0f0;
    background: transparent;
    border-radius: 6px;
    box-shadow: 0 0 10px #0f0;
    transition: 0.2s ease;
  }
  .corner-btn:hover {
    background: #0f0;
    color: #000;
    box-shadow: 0 0 20px #0f0;
  }
  #buyKeyBtn { left: 20px; }
  #telegramBtn { right: 20px; }

  #mainContent { display:none; }
</style>
</head>
<body>

<!-- ==== M√ÄN H√åNH NH·∫¨P KEY ==== -->
<div id="loginScreen">
  <div id="loginBox">
    <h2>üîê X√°c Th·ª±c Ng∆∞·ªùi D√πng Th·∫≠t</h2>
    <input id="keyInput" type="text" placeholder="Nh·∫≠p key t·∫°i ƒë√¢y">

    <div class="btn-row">
      <button class="login-btn" onclick="copyKeyLink()">üîë L·∫•y key</button>
      <button class="login-btn" onclick="showGuide()">üìú L∆∞u √ù</button>
    </div>

    <button class="btn-login-big" onclick="checkKey()">üîì ƒêƒÉng nh·∫≠p</button>
    <p id="loginMsg"></p>
  </div>

  <button id="buyKeyBtn" class="corner-btn" onclick="goBuyKey()">üõí Mua key</button>
  <button id="telegramBtn" class="corner-btn" onclick="goTelegram()">üë• Nh√≥m Telegram</button>
</div>

<!-- ==== TRANG CH√çNH ==== -->
<div id="mainContent">
  <button style="position:fixed;top:10px;right:10px;background:transparent;border:1px solid #0f0;color:#0f0;border-radius:6px;padding:5px 10px;font-size:12px;cursor:pointer;" onclick="logout()">üö™ ƒêƒÉng xu·∫•t</button>

  <h2>üé≤ AI X√≠ Ng·∫ßu Pro Max ‚Äì Cao Th·ªß Chuy√™n Nghi·ªáp</h2>
  <p>Nh·∫≠p 3 con x√≠ ng·∫ßu (1‚Äì6):</p>
  <input id="d1" type="number" min="1" max="6">
  <input id="d2" type="number" min="1" max="6">
  <input id="d3" type="number" min="1" max="6">
  <br>
  <button onclick="predict()">D·ª± ƒêo√°n Ti·∫øp Theo</button>
  <button onclick="clearHistory()">üßπ X√≥a L·ªãch S·ª≠</button>

  <div id="result"></div>
  <div id="confidence"></div>
  <div id="reason"></div>
  <div id="tip"></div>
  <div id="history"></div>
</div>

<script>
// ==== KEY CONFIG ====
const VALID_KEY = "2025";
const KEY_LINK = "https://link4m.com/MjHlW";
const BUY_KEY_LINK = "https://t.me/qbaodzvll";
const TELEGRAM_LINK = "https://t.me/qbaommo";

// ==== X·ª¨ L√ù ƒêƒÇNG NH·∫¨P ====
window.onload = () => {
  const savedKey = localStorage.getItem("accessKey");
  if (savedKey === VALID_KEY) {
    document.getElementById("loginScreen").style.display = "none";
    document.getElementById("mainContent").style.display = "block";
  } else {
    document.getElementById("loginScreen").style.display = "flex";
  }
};

function checkKey() {
  const key = document.getElementById("keyInput").value.trim();
  const msg = document.getElementById("loginMsg");
  if (key === VALID_KEY) {
    localStorage.setItem("accessKey", key);
    msg.style.color = "#0f0";
    msg.innerText = "‚úÖ X√°c th·ª±c th√†nh c√¥ng!";
    setTimeout(() => {
      document.getElementById("loginScreen").style.display = "none";
      document.getElementById("mainContent").style.display = "block";
    }, 700);
  } else {
    msg.style.color = "#f33";
    msg.innerText = "‚ùå Key kh√¥ng h·ª£p l·ªá!";
  }
}

function logout() {
  localStorage.removeItem("accessKey");
  document.getElementById("loginScreen").style.display = "flex";
  document.getElementById("mainContent").style.display = "none";
}

function copyKeyLink() {
  navigator.clipboard.writeText(KEY_LINK);
  alert("‚úÖ ƒê√£ sao ch√©p link l·∫•y key!");
}
function showGuide() {
  alert("üìú C√°ch l·∫•y key:\n1. B·∫•m 'L·∫•y key'.\n2. D√°n link V√†o Google Ho·∫∑c Safari.\n3. L√†m theo h∆∞·ªõng d·∫´n v√† d√°n key v√†o √¥.\n4. M·ªói Key Ch·ªâ S√†i Trong 10h - 24h");
}
function goBuyKey() { window.open(BUY_KEY_LINK, "_blank"); }
function goTelegram() { window.open(TELEGRAM_LINK, "_blank"); }

// ==== CODE CH√çNH: AI X√ç NG·∫¶U ====
let history = JSON.parse(localStorage.getItem('diceHistory') || '[]');
let learned = JSON.parse(localStorage.getItem('learnedRules') || '{"lastInput":"","lastOutput":"","expertStats":{"win":0,"lose":0},"lastGood":"","confidence":60}');

function predict() {
  let d1 = +document.getElementById('d1').value;
  let d2 = +document.getElementById('d2').value;
  let d3 = +document.getElementById('d3').value;
  if (![d1,d2,d3].every(v=>v>=1&&v<=6)) return alert("Nh·∫≠p s·ªë h·ª£p l·ªá (1‚Äì6)");

  const inputKey = `${d1}-${d2}-${d3}`;
  if (learned.lastInput === inputKey) {
    showResult(learned);
    return;
  }

  const sum = d1 + d2 + d3;
  const type = sum >= 11 ? "T√†i" : "X·ªâu";
  history.push({sum, type});
  if (history.length > 100) history.shift();

  let counts = {T√†i:0, X·ªâu:0};
  for (let h of history.slice(-12)) counts[h.type]++;

  let recent = history.slice(-6).map(h=>h.type);
  let pattern = recent.join("-");
  let reason = "", prediction = "", confidence = 60;

  // === PH√ÇN T√çCH C·∫¶U CAO TH·ª¶ ===
  if (recent.every(v=>v===recent[0]) && recent.length >= 3) {
    reason = "C·∫ßu b·ªát m·∫°nh ‚Äì cao th·ªß theo ti·∫øp cho ƒë·∫øn khi g√£y.";
    prediction = recent[0];
    confidence = 92;
  } else if (/T√†i-X·ªâu-T√†i|X·ªâu-T√†i-X·ªâu/.test(pattern)) {
    reason = "C·∫ßu xen k·∫Ω ·ªïn ƒë·ªãnh ‚Äì theo ti·∫øp h∆∞·ªõng cu·ªëi.";
    prediction = recent[recent.length-1];
    confidence = 85;
  } else if (/T√†i-T√†i-X·ªâu|X·ªâu-X·ªâu-T√†i/.test(pattern)) {
    reason = "C·∫ßu 1-2 ‚Äì cao th·ªß gi·ªØ nh·ªãp ƒë√¥i.";
    prediction = recent[recent.length-1];
    confidence = 78;
  } else if (counts.T√†i > counts.X·ªâu + 4) {
    reason = "T√†i √°p ƒë·∫£o nhi·ªÅu ‚Äì cao th·ªß ch·ªù ƒë·∫£o, v√†o nh·∫π X·ªâu.";
    prediction = "X·ªâu";
    confidence = 72;
  } else if (counts.X·ªâu > counts.T√†i + 4) {
    reason = "X·ªâu √°p ƒë·∫£o nhi·ªÅu ‚Äì kh·∫£ nƒÉng ƒë·∫£o T√†i cao.";
    prediction = "T√†i";
    confidence = 72;
  } else if (/T√†i-T√†i-T√†i|X·ªâu-X·ªâu-X·ªâu/.test(pattern)) {
    reason = "C·∫ßu 3-3 ‚Äì theo ti·∫øp cho ƒë·∫øn khi ƒë·∫£o nh·ªãp.";
    prediction = recent[recent.length-1];
    confidence = 80;
  } else {
    reason = "Kh√¥ng r√µ c·∫ßu ‚Äì d√πng h·ªçc th·ª±c chi·∫øn theo k·∫øt qu·∫£ g·∫ßn nh·∫•t.";
    prediction = learned.lastGood || (Math.random()>0.5?"T√†i":"X·ªâu");
    confidence = 65;
  }

  if (learned.lastPredict && learned.lastResult) {
    if (learned.lastPredict === learned.lastResult) {
      learned.expertStats.win++;
      learned.lastGood = learned.lastPredict;
      confidence = Math.min(95, confidence + 5);
    } else {
      learned.expertStats.lose++;
      confidence = Math.max(50, confidence - 5);
    }
  }

  learned.lastPredict = prediction;
  learned.lastResult = type;
  learned.lastInput = inputKey;
  learned.lastOutput = `üîÆ D·ª± ƒëo√°n: <b>${prediction}</b>`;
  learned.lastReason = `üìò L√Ω do: ${reason}`;
  learned.lastTip = getRandomTip(confidence);
  learned.confidence = confidence;

  localStorage.setItem('learnedRules', JSON.stringify(learned));
  localStorage.setItem('diceHistory', JSON.stringify(history));

  showResult(learned);
}

function showResult(data) {
  let color = "#ff0";
  if (data.confidence >= 85) color = "#0f0";
  else if (data.confidence < 65) color = "#f33";

  document.getElementById('result').innerHTML = data.lastOutput;
  document.getElementById('confidence').innerHTML = `üî• ƒê·ªô t·ª± tin: <b style="color:${color}">${data.confidence}%</b>`;
  document.getElementById('reason').innerText = data.lastReason;
  document.getElementById('tip').innerText = data.lastTip;
  document.getElementById('history').innerText = "L·ªãch s·ª≠: " + history.slice(-10).map(h=>h.type).join(" ");
}

function getRandomTip(conf) {
  const tipsHigh = [
    "üí° C·∫ßu m·∫°nh ‚Üí ch·ªâ theo nh·ªãp ƒë√∫ng, kh√¥ng c·∫ßn g·∫•p th·∫øp.",
    "üí° ƒêang ƒÉn ƒë·ªÅu ‚Üí ti·∫øp t·ª•c gi·ªØ m·ª©c c∆∞·ª£c, ƒë·ª´ng tƒÉng v·ªôi.",
    "üí° Cao th·ªß: th·∫Øng 3 d·ª´ng 1, ƒë·ªÉ b·∫£o to√†n nh·ªãp l·ª£i nhu·∫≠n."
  ];
  const tipsMid = [
    "üí° Nh·ªãp ƒëang ·ªïn, nh∆∞ng ƒë·ª´ng ƒë√°nh l·ªõn.",
    "üí° Theo nh·∫π 1‚Äì2 v√°n r·ªìi quan s√°t ti·∫øp.",
    "üí° Khi % trung b√¨nh, ch·ªâ d√πng v·ªën nh·ªè."
  ];
  const tipsLow = [
    "üí° Kh√¥ng r√µ c·∫ßu ‚Äì n√™n b·ªè l∆∞·ª£t ho·∫∑c quan s√°t th√™m.",
    "üí° Khi c·∫ßu r·ªëi ‚Üí ch·ªù t√≠n hi·ªáu b·ªát r√µ m·ªõi v√†o.",
    "üí° Cao th·ªß lu√¥n ngh·ªâ khi c·∫£m th·∫•y kh√¥ng ch·∫Øc."
  ];

  if (conf >= 85) return tipsHigh[Math.floor(Math.random()*tipsHigh.length)];
  else if (conf >= 70) return tipsMid[Math.floor(Math.random()*tipsMid.length)];
  else return tipsLow[Math.floor(Math.random()*tipsLow.length)];
}

function clearHistory() {
  history = [];
  learned = {"lastInput":"","lastOutput":"","expertStats":{"win":0,"lose":0},"lastGood":"","confidence":60};
  localStorage.removeItem('diceHistory');
  localStorage.removeItem('learnedRules');
  document.getElementById('result').innerText = "";
  document.getElementById('confidence').innerText = "";
  document.getElementById('reason').innerText = "";
  document.getElementById('tip').innerText = "";
  document.getElementById('history').innerText = "ƒê√£ x√≥a l·ªãch s·ª≠.";
}
</script>
</body>
</html>
